{"ast":null,"code":"import axios from'axios';import setAuthToken from\"../utils/setAuthToken\";import jwt_decode from\"jwt-decode\";import{GET_ERRORS,SET_CURRENT_USER,USER_LOADING}from\"./types\";//Register user\nexport var registerUser=function registerUser(userData,history,clear){return function(dispatch){axios.post('/api/users/register',userData).then(function(res){history.push('/login');clear();})//redirect to login page after registration\n.catch(function(err){return dispatch({type:GET_ERRORS,payload:err.response.data});});};};export var loginUser=function loginUser(userData,history){return function(dispatch){axios.post('/api/users/login',userData).then(function(res){var token=res.data.token;localStorage.setItem('jwtToken',token);setAuthToken(token);var decoded=jwt_decode(token);dispatch(setCurrentUser(decoded));}).catch(function(err){return dispatch({type:GET_ERRORS,payload:err.response.data});});};};export var setCurrentUser=function setCurrentUser(decoded){return{type:SET_CURRENT_USER,payload:decoded};};export var setUserLoading=function setUserLoading(){return{type:USER_LOADING};};export var logoutUser=function logoutUser(){return function(dispatch){localStorage.removeItem('jwtToken');setAuthToken(false);dispatch(setCurrentUser({}));};};","map":{"version":3,"sources":["/Users/abhinav/Desktop/itilapp/client/src/actions/authActions.js"],"names":["axios","setAuthToken","jwt_decode","GET_ERRORS","SET_CURRENT_USER","USER_LOADING","registerUser","userData","history","clear","dispatch","post","then","res","push","catch","err","type","payload","response","data","loginUser","token","localStorage","setItem","decoded","setCurrentUser","setUserLoading","logoutUser","removeItem"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,YAAP,KAAyB,uBAAzB,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CAEA,OAASC,UAAT,CAAqBC,gBAArB,CAAuCC,YAAvC,KAA2D,SAA3D,CAEA;AACA,MAAO,IAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,QAAD,CAAWC,OAAX,CAAoBC,KAApB,QAA8B,UAAAC,QAAQ,CAAI,CAClEV,KAAK,CACAW,IADL,CACU,qBADV,CACiCJ,QADjC,EAEKK,IAFL,CAEU,SAAAC,GAAG,CAAI,CACTL,OAAO,CAACM,IAAR,CAAa,QAAb,EACAL,KAAK,GACR,CALL,CAMM;AANN,CAOKM,KAPL,CAOW,SAAAC,GAAG,QACNN,CAAAA,QAAQ,CAAC,CACLO,IAAI,CAAEd,UADD,CAELe,OAAO,CAAEF,GAAG,CAACG,QAAJ,CAAaC,IAFjB,CAAD,CADF,EAPd,EAaH,CAd2B,EAArB,CAgBP,MAAO,IAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACd,QAAD,CAAWC,OAAX,QAAuB,UAAAE,QAAQ,CAAI,CACxDV,KAAK,CACAW,IADL,CACU,kBADV,CAC8BJ,QAD9B,EAEKK,IAFL,CAEU,SAAAC,GAAG,CAAI,IACDS,CAAAA,KADC,CACST,GAAG,CAACO,IADb,CACDE,KADC,CAETC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAiCF,KAAjC,EACArB,YAAY,CAACqB,KAAD,CAAZ,CACA,GAAMG,CAAAA,OAAO,CAAGvB,UAAU,CAACoB,KAAD,CAA1B,CACAZ,QAAQ,CAACgB,cAAc,CAACD,OAAD,CAAf,CAAR,CACH,CARL,EASKV,KATL,CASW,SAAAC,GAAG,QACNN,CAAAA,QAAQ,CAAC,CACLO,IAAI,CAAEd,UADD,CAELe,OAAO,CAAEF,GAAG,CAACG,QAAJ,CAAaC,IAFjB,CAAD,CADF,EATd,EAeH,CAhBwB,EAAlB,CAkBP,MAAO,IAAMM,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAAD,OAAO,CAAI,CACrC,MAAO,CACHR,IAAI,CAAEb,gBADH,CAEHc,OAAO,CAAEO,OAFN,CAAP,CAIH,CALM,CAOP,MAAO,IAAME,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAChC,MAAO,CACHV,IAAI,CAAEZ,YADH,CAAP,CAGH,CAJM,CAMP,MAAO,IAAMuB,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,SAAM,UAAAlB,QAAQ,CAAI,CACxCa,YAAY,CAACM,UAAb,CAAwB,UAAxB,EACA5B,YAAY,CAAC,KAAD,CAAZ,CACAS,QAAQ,CAACgB,cAAc,CAAC,EAAD,CAAf,CAAR,CACH,CAJyB,EAAnB","sourcesContent":["import axios from 'axios';\nimport setAuthToken from \"../utils/setAuthToken\";\nimport jwt_decode from \"jwt-decode\";\n\nimport { GET_ERRORS, SET_CURRENT_USER, USER_LOADING } from \"./types\";\n\n//Register user\nexport const registerUser = (userData, history, clear) => dispatch => {\n    axios\n        .post('/api/users/register', userData)\n        .then(res => {\n            history.push('/login');\n            clear();\n        }\n        ) //redirect to login page after registration\n        .catch(err => \n            dispatch({\n                type: GET_ERRORS,\n                payload: err.response.data\n            })\n        );\n}\n\nexport const loginUser = (userData, history) => dispatch => {\n    axios\n        .post('/api/users/login', userData)\n        .then(res => {\n            const { token } = res.data;\n            localStorage.setItem('jwtToken', token);\n            setAuthToken(token);\n            const decoded = jwt_decode(token);\n            dispatch(setCurrentUser(decoded));\n        })\n        .catch(err =>\n            dispatch({\n                type: GET_ERRORS,\n                payload: err.response.data\n            })\n        );\n}\n\nexport const setCurrentUser = decoded => {\n    return {\n        type: SET_CURRENT_USER,\n        payload: decoded\n    };\n};\n\nexport const setUserLoading = () => {\n    return {\n        type: USER_LOADING\n    };\n};\n\nexport const logoutUser = () => dispatch => {\n    localStorage.removeItem('jwtToken');\n    setAuthToken(false);\n    dispatch(setCurrentUser({}))\n};\n"]},"metadata":{},"sourceType":"module"}